<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Love Messages</title>
    <style>
        body {
            margin: 0;
            overflow: hidden;
            background: #000;
        }
        canvas {
            width: 100%;
            height: 100vh;
        }
        #hearts {
            position: fixed;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 1000;
        }
    </style>
</head>
<body>
    <div id="hearts"></div>
    <!-- ThÃªm audio player -->
    <audio id="bgMusic" autoplay loop>
        <source src="nhac.mp3" type="audio/mp3">
    </audio>
    
    <!-- NÃºt Ä‘iá»u khiá»ƒn Ã¢m thanh -->
    <button id="musicToggle" style="position: fixed; bottom: 20px; right: 20px; z-index: 1000; padding: 15px; border-radius: 50%; background: rgba(255,255,255,0.2); border: none; cursor: pointer; font-size: 20px; color: white; outline: none;">
        ğŸµ
    </button>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script>
        // Máº£ng cÃ¡c lá»i tá» tÃ¬nh
        const messages = [
            // Tiáº¿ng Viá»‡t
            "Anh yÃªu em nhiá»u láº¯m",
            "Cáº£m Æ¡n vÃ¬ em Ä‘Ã£ Ä‘áº¿n",
            "Anh sáº½ luÃ´n bÃªn cáº¡nh em",
            "LÃ m ngÆ°á»i yÃªu anh nhÃ© â¤",
            "Em cÃ³ thá»ƒ lÃ m báº¡n gÃ¡i anh khÃ´ng?",
            "Em lÃ  Ä‘iá»u tuyá»‡t vá»i nháº¥t",
            "MÃ£i bÃªn em",
            "YÃªu em nhiá»u láº¯m",
            "Em lÃ  tÃ¬nh yÃªu cá»§a anh",
            "BÃªn em lÃ  Ä‘iá»u háº¡nh phÃºc nháº¥t",
            "Cáº£m Æ¡n vÃ¬ Ä‘Ã£ á»Ÿ bÃªn anh",
            "Em lÃ  cáº£ tháº¿ giá»›i cá»§a anh",
            // Tiáº¿ng Anh
            "I love you so much",
            "You are my everything",
            "Be my love â¤",
            "Will you be my girlfriend?",
            "You are the best thing ever",
            "Stay with me forever",
            "You mean everything to me",
            "Thank you for being here",
            "You are my world",
            "I will always be there for you",
            "You make me complete",
            "My heart belongs to you"
        ];

        // Khá»Ÿi táº¡o scene Three.js
        const scene = new THREE.Scene();
        const camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
        const renderer = new THREE.WebGLRenderer({ antialias: true });
        renderer.setSize(window.innerWidth, window.innerHeight);
        document.body.appendChild(renderer.domElement);

        // Táº¡o group cho text
        const sphere = new THREE.Group();
        scene.add(sphere);
        camera.position.z = 10;

        // Táº¡o canvas texture cho text 2D vá»›i hiá»‡u á»©ng phÃ¡t sÃ¡ng
        function createTextTexture(text) {
            const canvas = document.createElement('canvas');
            const ctx = canvas.getContext('2d');
            canvas.width = 2048; // TÄƒng kÃ­ch thÆ°á»›c canvas
            canvas.height = 512;
            
            // XÃ³a ná»n
            ctx.fillStyle = 'rgba(0,0,0,0)';
            ctx.fillRect(0, 0, canvas.width, canvas.height);
            
            // Thiáº¿t láº­p font vÃ  style
            const fontSize = 120;
            ctx.font = `bold ${fontSize}px "Great Vibes"`;
            ctx.textAlign = 'center';
            ctx.textBaseline = 'middle';
            
            // Táº¡o hiá»‡u á»©ng glow máº¡nh hÆ¡n
            const gradientColor = ctx.createLinearGradient(0, 0, canvas.width, 0);
            gradientColor.addColorStop(0, '#ffffff');
            gradientColor.addColorStop(1, '#f0f0f0');
            
            // Váº½ nhiá»u lá»›p Ä‘á»ƒ táº¡o hiá»‡u á»©ng phÃ¡t sÃ¡ng
            for(let i = 6; i >= 0; i--) {
                ctx.shadowColor = 'rgba(255,255,255,0.8)';
                ctx.shadowBlur = 20 + i * 2;
                ctx.shadowOffsetX = 0;
                ctx.shadowOffsetY = 0;
                ctx.fillStyle = i === 0 ? gradientColor : `rgba(255,255,255,${0.2 + i * 0.1})`;
                ctx.fillText(text, canvas.width/2, canvas.height/2);
            }
            
            const texture = new THREE.CanvasTexture(canvas);
            texture.minFilter = THREE.LinearFilter;
            texture.magFilter = THREE.LinearFilter;
            texture.needsUpdate = true;
            return texture;
        }

        // Táº¡o text sprites
        messages.forEach((text, i) => {
            const texture = createTextTexture(text);
            const material = new THREE.SpriteMaterial({ 
                map: texture,
                transparent: true,
                blending: THREE.AdditiveBlending,
                depthTest: false,
                depthWrite: false
            });
            const sprite = new THREE.Sprite(material);
            
            // PhÃ¢n bá»‘ text Ä‘á»u hÆ¡n
            const radius = 6;
            const phi = Math.acos(-1 + (2 * i) / messages.length);
            const theta = Math.sqrt(messages.length * Math.PI) * phi;
            
            sprite.position.x = radius * Math.cos(theta) * Math.sin(phi);
            sprite.position.y = radius * Math.sin(theta) * Math.sin(phi);
            sprite.position.z = radius * Math.cos(phi);
            
            sprite.scale.set(5, 1.25, 1); // Äiá»u chá»‰nh kÃ­ch thÆ°á»›c sprite
            sphere.add(sprite);
        });

        // Táº¡o hiá»‡u á»©ng tim rÆ¡i
        function createHeart() {
            const heart = document.createElement('div');
            heart.innerHTML = 'â¤';
            heart.style.position = 'fixed';
            heart.style.left = Math.random() * 100 + 'vw';
            heart.style.top = '-20px';
            heart.style.fontSize = Math.random() * 40 + 20 + 'px';
            heart.style.color = '#ff4444';
            heart.style.textShadow = '0 0 5px #ff4444'; // ThÃªm phÃ¡t sÃ¡ng cho tim
            heart.style.zIndex = '1000';
            heart.style.pointerEvents = 'none';
            document.getElementById('hearts').appendChild(heart);

            const animation = heart.animate([
                { transform: 'translateY(0)', opacity: 1 },
                { transform: `translateY(${window.innerHeight + 20}px)`, opacity: 1 }, // Giá»¯ opacity = 1 cho Ä‘áº¿n khi rÆ¡i háº¿t
                { transform: `translateY(${window.innerHeight + 21}px)`, opacity: 0 }  // Chá»‰ má» Ä‘i khi Ä‘Ã£ rÆ¡i qua mÃ n hÃ¬nh
            ], {
                duration: Math.random() * 2000 + 8000,
                easing: 'linear'
            });

            animation.onfinish = () => heart.remove();
        }

        // TÄƒng táº§n suáº¥t táº¡o tim
        setInterval(createHeart, 100);

        // Táº¡o nhiá»u tim cÃ¹ng lÃºc
        function createMultipleHearts() {
            for(let i = 0; i < 3; i++) {
                setTimeout(createHeart, i * 50);
            }
        }
        setInterval(createMultipleHearts, 500);

        // Xá»­ lÃ½ sá»± kiá»‡n di chuyá»ƒn
        let isDragging = false;
        let previousMousePosition = { x: 0, y: 0 };

        document.addEventListener('mousedown', () => isDragging = true);
        document.addEventListener('mouseup', () => isDragging = false);
        document.addEventListener('touchstart', (e) => {
            isDragging = true;
            previousMousePosition = {
                x: e.touches[0].clientX,
                y: e.touches[0].clientY
            };
        });
        document.addEventListener('touchend', () => isDragging = false);

        document.addEventListener('mousemove', (e) => {
            if (isDragging) {
                const deltaMove = {
                    x: e.clientX - previousMousePosition.x,
                    y: e.clientY - previousMousePosition.y
                };

                sphere.rotation.y += deltaMove.x * 0.005;
                sphere.rotation.x += deltaMove.y * 0.005;
            }
            previousMousePosition = {
                x: e.clientX,
                y: e.clientY
            };
        });

        document.addEventListener('touchmove', (e) => {
            if (isDragging) {
                const deltaMove = {
                    x: e.touches[0].clientX - previousMousePosition.x,
                    y: e.touches[0].clientY - previousMousePosition.y
                };

                sphere.rotation.y += deltaMove.x * 0.005;
                sphere.rotation.x += deltaMove.y * 0.005;
            }
            previousMousePosition = {
                x: e.touches[0].clientX,
                y: e.touches[0].clientY
            };
        });

        // Animation loop
        function animate() {
            requestAnimationFrame(animate);
            sphere.rotation.y += 0.005;
            renderer.render(scene, camera);
        }
        animate();

        // Responsive
        window.addEventListener('resize', () => {
            camera.aspect = window.innerWidth / window.innerHeight;
            camera.updateProjectionMatrix();
            renderer.setSize(window.innerWidth, window.innerHeight);
        });

        // Code xá»­ lÃ½ audio
        const music = document.getElementById('bgMusic');
        const musicToggle = document.getElementById('musicToggle');
        
        // Tá»± Ä‘á»™ng phÃ¡t nháº¡c khi ngÆ°á»i dÃ¹ng tÆ°Æ¡ng tÃ¡c
        window.addEventListener('click', function() {
            music.play();
        }, { once: true });

        // Xá»­ lÃ½ nÃºt play/pause
        musicToggle.addEventListener('click', () => {
            if (music.paused) {
                music.play();
                musicToggle.textContent = 'ğŸµ';
            } else {
                music.pause();
                musicToggle.textContent = 'ğŸ”‡';
            }
        });

        // Äáº·t Ã¢m lÆ°á»£ng máº·c Ä‘á»‹nh
        music.volume = 0.5;
    </script>
</body>
</html>
